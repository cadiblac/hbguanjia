<include file="Public:common" />
<title>权限管理</title>
  <!--pickers css-->
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-datepicker/css/datepicker-custom.css" />
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-timepicker/css/timepicker.css" />
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-colorpicker/css/colorpicker.css" />
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-daterangepicker/daterangepicker-bs3.css" />
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-datetimepicker/css/datetimepicker-custom.css" />
</head>

<body class="sticky-header">
<include file="Public:header" />
        <!-- page heading start-->
        <div class="page-heading">
            <h3>
                设置角色权限
            </h3>
            <ul class="breadcrumb">
                <li>
                    <a href="{:U('Index/index')}">首页</a>
                </li>
                <li class="active"> 角色管理 </li>
            </ul>
        </div>
        <!-- page heading end-->

        <!--body wrapper start-->
        <div class="wrapper">
            <div class="row">
                <div class="col-md-12">
                    <section class="panel">
                        <header class="panel-heading">
                           角色管理
                            <span class="tools pull-right">
                                <a class="fa fa-chevron-down" href="javascript:;"></a>
                             </span>
                        </header>
                        <div class="panel-body">
                            <div class="adv-table editable-table ">
								<div class="clearfix">
									<div class="form-group">
										<a href="#myModal2" class="btn btn-primary" data-toggle="modal">
											添加角色 <i class="fa fa-plus"></i>
										</a>
										<!-- Modal -->
                            <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title">添加新角色</h4>
                                        </div>
                                        <div class="modal-body">
                                            <form action="{:U(MODULE_NAME.'/Rbac/addRoleHandle')}" method="post" class="form-horizontal ">
                                                <div class="form-group">
                                                    <label class="control-label col-md-4"> 角色名称</label>
                                                    <div class="col-md-6">
                                                        <input size="16" type="text" name="name" class="form-control">
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label class="control-label col-md-4">角色描述</label>
                                                    <div class="col-md-6 col-xs-11">
                                                        <input class="form-control " name="remark" size="16" type="text" value="" />
                                                    </div>
                                                </div>                                              
                                                <div class="form-group">
                                                    <label class="control-label col-md-4">开启状态</label>
                                                    <div class="col-md-6 col-xs-11">
													<label class="checkbox-inline">
                                                        <input type="radio" name="status" value="1" checked="checked" />&nbsp;开启&nbsp;
													</label>
													<label class="checkbox-inline">
														<input type="radio" name="status" value="0" />&nbsp;关闭&nbsp;
													</label>
                                                    </div>
                                                </div>
												<div class="modal-footer center-block">
													<input class="btn btn-primary" type="submit" value="保存">
												</div>
                                            </form>
                                        </div>

                                        
                                    </div>
                                </div>
                            </div>
                            <!-- modal -->
									</div>
								</div>
								<div class="space15"></div>
								<table class="table table-bordered table-striped dataTable">
								
								<thead>								
								<tr role="row">
									<th>ID</th>
									<th width=40%>角色名</th>
									<th>角色描述</th>
									<th width=5%>状态</th>
									<th width=15%>操作</th>
								</tr>
								</thead>
								<tbody>
								<foreach name="role" item="v">							
								<tr class="">
									<td>{$v.id}</td>
									<td>{$v.name}</td>
									<td>
										{$v.remark}
									</td>
									<td><if condition='$v["status"]'>开启<else />关闭</if></td>
									<td>
										<if condition='$v["status"]'>
										<a onclick="return confirm('确实要关闭吗？')" href="{:U(MODULE_NAME.'/Rbac/lockRole',array('id'=>$v['id']))}"><span class="btn btn-warning btn-xs">关闭</span></a>
										<else />
										<a onclick="return confirm('确实要开启吗？')" href="{:U(MODULE_NAME.'/Rbac/lockRole',array('id'=>$v['id'],'type'=>1))}"><span class="btn btn-primary  btn-xs">开启</span></a>
										</if>
										<a href="{:U(MODULE_NAME.'/Rbac/access',array('rid'=>$v['id']))}"><span class="btn btn-success btn-xs">配置权限</span></a>
									</td>
								</tr>
								</foreach>
								</tbody>								
								</table>
							</div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
        <!--body wrapper end-->
<include file="Public:bottom" />

<!-- Placed js at the end of the document so the pages load faster -->
<script src="__PUBLIC__/js/jquery-1.10.2.min.js"></script>
<script src="__PUBLIC__/js/jquery-ui-1.9.2.custom.min.js"></script>
<script src="__PUBLIC__/js/jquery-migrate-1.2.1.min.js"></script>
<script src="__PUBLIC__/js/bootstrap.min.js"></script>
<script src="__PUBLIC__/js/modernizr.min.js"></script>
<script src="__PUBLIC__/js/jquery.nicescroll.js"></script>

<!--pickers plugins-->
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-daterangepicker/moment.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>

<!--pickers initialization-->
<script src="__PUBLIC__/js/pickers-init.js"></script>


<!--common scripts for all pages-->
<script src="__PUBLIC__/js/scripts.js"></script>

</body>
</html>

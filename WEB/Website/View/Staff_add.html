<include file="Public:common" />
  <title>员工管理</title>
  <script src="__PUBLIC__/js/jquery-1.10.2.min.js"></script>
<!--tree-->
<script src="__PUBLIC__/js/jquery.ztree.core-3.5.js"></script>
<link rel="stylesheet" href="__PUBLIC__/css/zTreeStyle/metro.css" type="text/css">
<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/userdefind.css" />
<style type="text/css">
 .del{
	display:inline-block;
	color:blue;
	text-align: center;
	cursor: pointer; 
 }
</style>
<!--pickers css-->
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-datepicker/css/datepicker-custom.css" />
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-timepicker/css/timepicker.css" />
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-colorpicker/css/colorpicker.css" />
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-daterangepicker/daterangepicker-bs3.css" />
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/js/bootstrap-datetimepicker/css/datetimepicker-custom.css" />
<script type="text/javascript">
	var app="__ROOT__";
</script>
</head>

<body class="sticky-header">
<include file="Public:header" />
        <!-- page heading start-->
        <div class="page-heading">
            <h3>
                员工管理
            </h3>
            <ul class="breadcrumb">
                <li>
                    <a href="{:U('Index/index')}">首页</a>
                </li>
                <li class="active"> 员工管理 </li>
            </ul>
        </div>
        <!-- page heading end-->

        <!--body wrapper start-->
        <div class="wrapper">
            <div class="row">
               <div class="col-sm-12">
				<section class="panel">
				<header class="panel-heading">
					<span class="text-muted">{$action}员工信息</span>
					<span class="tools pull-right">
						<a class="fa fa-rotate-left" href="javascript:history.go(-1)"> 返回</a>
					 </span>
				</header>
				<div class="panel-body">
					<div class="form">
						<form class="cmxform form-horizontal adminex-form" method="post" action="{:U('Staff/runAdd')}">
							<div class="form-group ">
								<label for="firstname" class="control-label col-lg-1">员工姓名</label>
								<div class="col-lg-2">
									<input class=" form-control" name="name" type="text" value="{$v.name}" />
								</div>
								<label for="firstname" class="control-label col-lg-1">所属部门</label>
								<div class="col-lg-2">
								<select class="form-control" id="first" name="gs" onchange="setSecond(this)">
									<option <if condition="$v['gs'] eq 1">selected</if> value="1">黄环咨询</option>
									<option <if condition="$v['gs'] eq 2">selected</if> value="2">博创检测</option>
									<option <if condition="$v['gs'] eq 3">selected</if> value="3">黄环集团</option>
								</select>									
								</div>
								<div class="col-lg-2">
									<select class="form-control" name="bm" id="second">
									<if condition="$v['bm']">
									<switch name="v['bm']" >
									<case value="1"><option selected value='1'>技术部</option></case>
									<case value="2"><option selected value='2'>市场部</option></case>
									<case value="3"><option selected value='3'>分析部</option></case>
									<case value="4"><option selected value='4'>现场部</option></case>
									<case value="5"><option selected value='5'>综合部</option></case>
									</switch>
									</if>
									</select>
								</div>
							</div>
							<div class="form-group ">
								<label for="username" class="control-label col-lg-1">员工照片</label>
								<div class="col-lg-6">
									<a class="btn btn-primary upimgs" id="btn">选择图片</a> 最大2M，支持jpg，gif，png格式。
									<if condition="$v['photo']">
									 <dl id="ul_pics" class="ul_pics clearfix"><dd id='slt'><img src="{$v.photo}" /></dd></dl>
									 <input name="photo" id="picsa" style="display: none;" value="{$v.photo}">
									<else />
									 <dl id="ul_pics" class="ul_pics clearfix"><dd id='slt'></dd></dl>
									 <input name="photo" id="picsa" style="display: none;">
									</if>
								</div>
							</div>
							<div class="form-group ">
								<label for="lastname" class="control-label col-lg-1">联系电话</label>
								<div class="col-lg-6">
									<input class=" form-control" name="tel" type="text" value="{$v.tel}"/>
								</div>
							</div>
							<div class="form-group ">
								<label for="lastname" class="control-label col-lg-1">QQ</label>
								<div class="col-lg-6">
									<input class=" form-control" name="qq" type="text" value="{$v.qq}"/>
								</div>
							</div>
							<div class="form-group ">
								<label for="lastname" class="control-label col-lg-1">邮箱</label>
								<div class="col-lg-6">
									<input class=" form-control" value="{$v.email}" name="email" type="text"/>
								</div>
							</div>
							<div class="form-group ">
								<label for="lastname" class="control-label col-lg-1">微信号</label>
								<div class="col-lg-6">
									<input class=" form-control" value="{$v.wxh}" name="wxh" type="text"/>
								</div>
							</div>
							<div class="form-group ">
								<label for="username" class="control-label col-lg-1">微信二维码</label>
								<div class="col-lg-6">
									<a class="btn btn-primary upimgs" id="btn1">选择图片</a> 最大2M，支持jpg，gif，png格式。
									<if condition="$v['wxm']">
									 <dl id="ul_pics1" class="ul_pics clearfix"><dd id='slt1'><img src="{$v.wxm}" /></dd></dl>
									 <input name="wxm" id="pics1" style="display: none;" value="{$v.wxm}">
									<else/>
									 <dl id="ul_pics1" class="ul_pics clearfix"><dd id='slt1'></dd></dl>
									 <input name="wxm" id="pics1" style="display: none;">
									</if>
								</div>
							</div>														
							<div class="form-group">
								<div class="col-lg-offset-1 col-lg-10">
								<input type="hidden" name="id" value="{$v.id}">
									<input class="btn btn-primary" type="submit" value="保&nbsp;&nbsp;存">
								</div>
							</div>
						</form>
					</div>
				</div>
				</section>
				</div>
            </div>
        </div>
        <!--body wrapper end-->
<include file="Public:bottom" />
<!-- Placed js at the end of the document so the pages load faster -->
<script src="__PUBLIC__/js/jquery-ui-1.9.2.custom.min.js"></script>
<script src="__PUBLIC__/js/jquery-migrate-1.2.1.min.js"></script>
<script src="__PUBLIC__/js/bootstrap.min.js"></script>
<script src="__PUBLIC__/js/modernizr.min.js"></script>
<script src="__PUBLIC__/js/jquery.nicescroll.js"></script>
<!--pickers plugins-->
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-daterangepicker/moment.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
<script type="text/javascript">
  $('.date-picker').datepicker({
      language: 'zh-CN',
      autoclose: true,
      todayHighlight: true
  })
</script>
<script>
function setSecond(obj){
  var val = obj.value;
  if(val == 1){
    var sec = document.getElementById('second');
    sec.innerHTML = "<option value='1'>技术部</option><option value='2'>市场部</option>";
  }else if(val ==2 ){
    var sec = document.getElementById('second');
    sec.innerHTML = "<option value='3'>分析部</option><option value='4'>现场部</option>";
  }else{
	var sec = document.getElementById('second');
    sec.innerHTML = "<option value='2'>市场部</option><option value='5'>综合部</option>";
  }
}
</script>
<!--pickers initialization-->
<script src="__PUBLIC__/js/pickers-init.js"></script>

<script type="text/javascript" src="__PUBLIC__/plupload/plupload.full.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/upload.js"></script>
<script>
var upload = new plupload.Uploader(
      {
		runtimes: 'html5,flash,silverlight,html4', //上传插件初始化选用那种方式的优先级顺序
		browse_button: 'btn1', // 上传按钮
		url: app+"/index.php/Website/Common/upimg", //远程上传地址
		flash_swf_url: '__PUBLIC__/plupload/Moxie.swf', //flash文件地址
		silverlight_xap_url: '__PUBLIC__/plupload/Moxie.xap', //silverlight文件地址
		filters: {
			max_file_size: '2m', //最大上传文件大小（格式100b, 10kb, 10mb, 1gb）
			mime_types: [//允许文件上传类型
				{title: "files", extensions: "jpg,png,gif"}
			]
     },
    multi_selection: false, //true:ctrl多文件上传, false 单文件上传
    init: {
    	BeforeUpload: function(up, file) {
               var dd = '';
        },
        FilesAdded: function(up, files) { //文件上传前
            if ($("#ul_pics1").children("li").length > 30) {
                alert("您上传的图片太多了！");
                upload.destroy();
            } else {
                
                plupload.each(files, function(file) { //遍历文件
                    dd = "<div class='progress'><span class='bar'></span><span class='percent'></span></div>";
                });
                $("#ul_pics1").append(dd);
                upload.start();
            }
        },
        UploadProgress: function(up, file) { //上传中，显示进度条
     var percent = file.percent;
            $("#" + file.id).find('.bar').css({"width": percent + "%"});
            $("#" + file.id).find(".percent").text(percent + "%");
        },
        FileUploaded: function(up, file, info) { //文件上传成功的时候触发
            var data = eval("(" + info.response + ")");
            $("#slt1").html("<img src='" + data.pic + "'/>");
			//var old=$("#picsa").val();
			 $("#pics1").val(data.pic);
        },
        Error: function(up, err) { //上传出错的时候触发
            alert(err.message);
        }
    }
});
upload.init();
</script>
<!--common scripts for all pages-->
<script src="__PUBLIC__/js/scripts.js"></script>
</body>
</html>